(window.webpackJsonp=window.webpackJsonp||[]).push([[343],{807:function(s,a,e){"use strict";e.r(a);var t=e(11),n=Object(t.a)({},(function(){var s=this,a=s.$createElement,e=s._self._c||a;return e("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[e("h1",{attrs:{id:"docker基础---入门基础和helloworld"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker基础---入门基础和helloworld"}},[s._v("¶")]),s._v(" Docker基础 - 入门基础和Helloworld")]),s._v(" "),e("blockquote",[e("p",[s._v("在了解了虚拟化技术和Docker之后，让我们上手Docker，看看Docker是怎么工作的。这里会介绍CentOS环境下Docker的安装和配置，以及会给你展示两个实例，给你一个直观的理解。再啰嗦下，有条件的情况下直接看"),e("a",{attrs:{href:"https://docs.docker.com/install/linux/docker-ce/centos/",target:"_blank",rel:"noopener noreferrer"}},[s._v("官网"),e("OutboundLink")],1),s._v(", 网上资料鱼龙混杂，版本也更新不及时。@pdai")])]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#docker%e5%9f%ba%e7%a1%80---%e5%85%a5%e9%97%a8%e5%9f%ba%e7%a1%80%e5%92%8chelloworld"}},[s._v("Docker基础 - 入门基础和Helloworld")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#docker-%e6%9e%b6%e6%9e%84"}},[s._v("Docker 架构")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#docker-%e5%ae%89%e8%a3%85"}},[s._v("Docker 安装")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#centos-%e7%89%88%e6%9c%ac%e8%a6%81%e6%b1%82"}},[s._v("CentOS 版本要求")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%e5%8d%b8%e8%bd%bd%e8%80%81%e7%9a%84docker%e5%8f%8a%e4%be%9d%e8%b5%96"}},[s._v("卸载老的Docker及依赖")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%e5%ae%89%e8%a3%85%e4%b8%80%e4%ba%9b%e4%be%9d%e8%b5%96%e5%ba%93"}},[s._v("安装一些依赖库")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%e5%ae%89%e8%a3%85docker-ce"}},[s._v("安装Docker CE")])])])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%e4%bb%93%e5%ba%93%e9%85%8d%e7%bd%ae"}},[s._v("仓库配置")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%e9%95%9c%e5%83%8f%e6%9f%a5%e7%9c%8b%e5%92%8c%e6%8b%89%e5%8f%96"}},[s._v("镜像查看和拉取")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%e5%ae%b9%e5%99%a8%e5%ae%9e%e4%be%8b-ubuntu%e5%ae%9e%e4%be%8b"}},[s._v("容器实例-ubuntu实例")]),s._v(" "),e("ul",[e("li",[e("a",{attrs:{href:"#%e4%bb%8e%e4%b8%80%e4%b8%aaubuntu%e7%9a%84hello-world%e8%af%b4%e8%b5%b7"}},[s._v("从一个ubuntu的hello world说起")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%e8%bf%90%e8%a1%8c%e4%ba%a4%e4%ba%92%e5%bc%8f%e7%9a%84%e5%ae%b9%e5%99%a8"}},[s._v("运行交互式的容器")])]),s._v(" "),e("li",[e("a",{attrs:{href:"#%e8%bf%90%e8%a1%8c%e5%ae%b9%e5%99%a8%e8%87%b3%e5%90%8e%e5%8f%b0%e6%a8%a1%e5%bc%8f"}},[s._v("运行容器至后台模式")])])])])])])]),s._v(" "),e("h2",{attrs:{id:"docker-架构"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-架构"}},[s._v("¶")]),s._v(" Docker 架构")]),s._v(" "),e("blockquote",[e("p",[s._v("理解如下的一些概念，你才知道安装什么")])]),s._v(" "),e("p",[s._v("Docker 使用客户端-服务器 (C/S) 架构模式，使用远程API来管理和创建Docker容器。")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("Docker 客户端(Client)")]),s._v(" : Docker 客户端通过命令行或者其他工具使用 Docker SDK (https://docs.docker.com/develop/sdk/) 与 Docker 的守护进程通信。")]),s._v(" "),e("li",[e("strong",[s._v("Docker 主机(Host)")]),s._v(" ：一个物理或者虚拟的机器用于执行 Docker 守护进程和容器。")])]),s._v(" "),e("p",[s._v("Docker 包括三个基本概念:")]),s._v(" "),e("ul",[e("li",[e("strong",[s._v("镜像（Image）")]),s._v("：Docker 镜像（Image），就相当于是一个 root 文件系统。比如官方镜像 ubuntu:16.04 就包含了完整的一套 Ubuntu16.04 最小系统的 root 文件系统。")]),s._v(" "),e("li",[e("strong",[s._v("容器（Container）")]),s._v("：镜像（Image）和容器（Container）的关系，就像是面向对象程序设计中的类和实例一样，镜像是静态的定义，容器是镜像运行时的实体。容器可以被创建、启动、停止、删除、暂停等。")]),s._v(" "),e("li",[e("strong",[s._v("仓库（Repository）")]),s._v("：仓库可看着一个代码控制中心，用来保存镜像。")])]),s._v(" "),e("p",[e("img",{staticClass:"lazy",attrs:{alt:"","data-src":"https://pdai-1257820000.cos.ap-beijing.myqcloud.com/pdai.tech/public/_images/devops/docker/docker-x-1.png",loading:"lazy"}})]),s._v(" "),e("h2",{attrs:{id:"docker-安装"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#docker-安装"}},[s._v("¶")]),s._v(" Docker 安装")]),s._v(" "),e("blockquote",[e("p",[s._v("从 2017 年 3 月开始 docker 在原来的基础上分为两个分支版本: Docker CE 和 Docker EE：Docker CE 即社区免费版；Docker EE 即企业版，强调安全，但需付费使用；按照官网上Docker Engine - Community包现在就是叫做Docker CE。这里将展示在CentOS上安装Docker。")])]),s._v(" "),e("h3",{attrs:{id:"centos-版本要求"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#centos-版本要求"}},[s._v("¶")]),s._v(" CentOS 版本要求")]),s._v(" "),e("p",[s._v("官网要求，使用CentOS7的稳定版本，同时：")]),s._v(" "),e("ul",[e("li",[s._v("启用"),e("code",[s._v("centos-extras")])]),s._v(" "),e("li",[s._v("推荐使用"),e("code",[s._v("overlay2")]),s._v("存储驱动")])]),s._v(" "),e("h3",{attrs:{id:"卸载老的docker及依赖"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#卸载老的docker及依赖"}},[s._v("¶")]),s._v(" 卸载老的Docker及依赖")]),s._v(" "),e("blockquote",[e("p",[s._v("为什么你可能还需要删除较低的Docker安装？因为较旧版本的Docker被称为docker或docker-engine（它是一个简化Docker安装的命令行工具，通过一个简单的命令行即可在相应的平台上安装Docker，比如VirtualBox、 Digital Ocean、Microsoft Azure）")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum remove docker "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-client-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-common "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-latest-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-logrotate "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n                  docker-engine\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br")])]),e("h3",{attrs:{id:"安装一些依赖库"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装一些依赖库"}},[s._v("¶")]),s._v(" 安装一些依赖库")]),s._v(" "),e("ul",[e("li",[s._v("yum-utils 提供 yum-config-manager 类库")]),s._v(" "),e("li",[s._v("device-mapper-persistent-data 和 lvm2 被devicemapper 存储驱动依赖")])]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y yum-utils "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  device-mapper-persistent-data "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n  lvm2\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("设置稳定版本的库")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" yum-config-manager "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    --add-repo "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("\\")]),s._v("\n    https://download.docker.com/linux/centos/docker-ce.repo\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"安装docker-ce"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#安装docker-ce"}},[s._v("¶")]),s._v(" 安装Docker CE")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("yum "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("install")]),s._v(" -y docker-ce\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("安装完之后启动")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl start docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("测试是否安装成功")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# systemctl status docker")]),s._v("\n● docker.service - Docker Application Container Engine\n   Loaded: loaded "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("/usr/lib/systemd/system/docker.service"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" disabled"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" vendor preset: disabled"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n   Active: active "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("running"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v(" since Mon "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2020")]),s._v("-02-17 "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(":57:45 CST"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(";")]),s._v(" 39s ago\n     Docs: https://docs.docker.com\n Main PID: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("26029")]),s._v(" "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("dockerd"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n    Tasks: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("8")]),s._v("\n   Memory: "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("36")]),s._v(".9M\n   CGroup: /system.slice/docker.service\n           └─26029 /usr/bin/dockerd -H fd:// --containerd"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("=")]),s._v("/run/containerd/containerd\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("h2",{attrs:{id:"仓库配置"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#仓库配置"}},[s._v("¶")]),s._v(" 仓库配置")]),s._v(" "),e("blockquote",[e("p",[s._v("Docker 安装好以后，我们就要开始为拉取镜像准备了；国内从 DockerHub 拉取镜像有时会特别慢，此时可以"),e("strong",[s._v("配置镜像加速器")]),s._v("。")])]),s._v(" "),e("p",[s._v("Docker 官方和国内很多云服务商都提供了国内加速器服务，比如：")]),s._v(" "),e("ul",[e("li",[s._v("阿里云的加速器：https://help.aliyun.com/document_detail/60750.html")]),s._v(" "),e("li",[s._v("网易加速器：http://hub-mirror.c.163.com")]),s._v(" "),e("li",[s._v("Docker官方中国加速器：https://registry.docker-cn.com")]),s._v(" "),e("li",[s._v("ustc 的镜像：https://docker.mirrors.ustc.edu.cn")]),s._v(" "),e("li",[s._v("daocloud：https://www.daocloud.io/mirror#accelerator-doc（注册后使用）")])]),s._v(" "),e("p",[e("strong",[s._v("这里配置 Docker官方中国的加速器")]),s._v("：")]),s._v(" "),e("p",[s._v("对于使用 systemd 的系统，请在 /etc/docker/daemon.json 中写入如下内容（如果文件不存在请新建该文件）")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"registry-mirrors"')]),s._v(":"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"https://registry.docker-cn.com"')]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("之后重新启动服务")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl daemon-reload\n$ "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("sudo")]),s._v(" systemctl restart docker\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("h2",{attrs:{id:"镜像查看和拉取"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#镜像查看和拉取"}},[s._v("¶")]),s._v(" 镜像查看和拉取")]),s._v(" "),e("blockquote",[e("p",[s._v("拉一个docker镜像试试吧？")])]),s._v(" "),e("p",[s._v("拉取hello world")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker pull hello-world:latest")]),s._v("\nlatest: Pulling from library/hello-world\n1b930d010525: Pull complete\nDigest: sha256:9572f7cdcee8591948c2963463447a53466950b3fc15a247fcad1917ca215a2f\nStatus: Downloaded newer image "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" hello-world:latest\ndocker.io/library/hello-world:latest\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br")])]),e("p",[s._v("看本地仓库是否有这个库")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker images")]),s._v("\nREPOSITORY          TAG                 IMAGE ID            CREATED             SIZE\nhello-world         latest              fce289e99eb9        "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("13")]),s._v(" months ago       "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(".84kB\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("运行这个镜像的实例，即容器")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run hello-world")]),s._v("\n\nHello from Docker"),e("span",{pre:!0,attrs:{class:"token operator"}},[s._v("!")]),s._v("\nThis message shows that your installation appears to be working correctly.\n\nTo generate this message, Docker took the following steps:\n "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("1")]),s._v(". The Docker client contacted the Docker daemon.\n "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("2")]),s._v(". The Docker daemon pulled the "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"hello-world"')]),s._v(" image from the Docker Hub.\n    "),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("amd64"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("3")]),s._v(". The Docker daemon created a new container from that image "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" runs the\n    executable that produces the output you are currently reading.\n "),e("span",{pre:!0,attrs:{class:"token number"}},[s._v("4")]),s._v(". The Docker daemon streamed that output to the Docker client, "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("which")]),s._v(" sent it\n    to your terminal.\n\nTo try something "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" ambitious, you can run an Ubuntu container with:\n $ docker run -it ubuntu "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("bash")]),s._v("\n\nShare images, automate workflows, and "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" with a "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("free")]),s._v(" Docker ID:\n https://hub.docker.com/\n\nFor "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("more")]),s._v(" examples and ideas, visit:\n https://docs.docker.com/get-started/\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br"),e("span",{staticClass:"line-number"},[s._v("20")]),e("br"),e("span",{staticClass:"line-number"},[s._v("21")]),e("br"),e("span",{staticClass:"line-number"},[s._v("22")]),e("br")])]),e("blockquote",[e("p",[s._v("注意, 如果你在没有镜像的时候，直接"),e("code",[s._v("docker run hello-world")]),s._v("也是可以的；它会先检查本地是否有这个镜像，没有的话会先从指定仓库中拉取。")])]),s._v(" "),e("h2",{attrs:{id:"容器实例-ubuntu实例"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#容器实例-ubuntu实例"}},[s._v("¶")]),s._v(" 容器实例-ubuntu实例")]),s._v(" "),e("blockquote",[e("p",[s._v("上面我们跑了一个官方的Hello-world容器实例, 这里通过介绍运行ubuntu的实例来全面理解如何跑一个Docker实例")])]),s._v(" "),e("h3",{attrs:{id:"从一个ubuntu的hello-world说起"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#从一个ubuntu的hello-world说起"}},[s._v("¶")]),s._v(" 从一个ubuntu的hello world说起")]),s._v(" "),e("p",[s._v("Docker 允许你在容器内运行应用程序， 使用 docker run 命令来在容器内运行一个应用程序。这里同样是个Hello World，不同在于它是在容器内部运行的。")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run ubuntu:latest /bin/echo "Hello world"')]),s._v("\nUnable to "),e("span",{pre:!0,attrs:{class:"token function"}},[s._v("find")]),s._v(" image "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v("'ubuntu:latest'")]),s._v(" locally\nlatest: Pulling from library/ubuntu\n5c939e3a4d10: Pull complete\nc63719cdbe7a: Pull complete\n19a861ea6baf: Pull complete\n651c9d2d6c4f: Pull complete\nDigest: sha256:8d31dad0c58f552e890d68bbfb735588b6b820a46e459672d96e585871acc110\nStatus: Downloaded newer image "),e("span",{pre:!0,attrs:{class:"token keyword"}},[s._v("for")]),s._v(" ubuntu:latest\nHello world\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br")])]),e("p",[s._v("我们看下各个参数的含义：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("docker")]),s._v(": Docker 的二进制执行文件。")]),s._v(" "),e("li",[e("code",[s._v("run")]),s._v(": 与前面的 docker 组合来运行一个容器。")]),s._v(" "),e("li",[e("code",[s._v("ubuntu:latest")]),s._v(" 指定要运行的镜像，Docker 首先从本地主机上查找镜像是否存在，如果不存在，Docker 就会从镜像仓库 Docker Hub 下载公共镜像。")]),s._v(" "),e("li",[e("code",[s._v('/bin/echo "Hello world"')]),s._v(": 在启动的容器里执行的命令")])]),s._v(" "),e("p",[s._v('以上命令完整的意思可以解释为：Docker 以 ubuntu 最新的（默认是latest) 镜像创建一个新容器，然后在容器里执行 bin/echo "Hello world"，然后输出结果。')]),s._v(" "),e("h3",{attrs:{id:"运行交互式的容器"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行交互式的容器"}},[s._v("¶")]),s._v(" 运行交互式的容器")]),s._v(" "),e("blockquote",[e("p",[s._v("以上面例子，容器跑的是Ubuntu是一个系统实例，能否进入系统进行交互呢？")])]),s._v(" "),e("p",[s._v('我们通过 docker 的两个参数 -i -t，让 docker 运行的容器实现"对话"的能力：')]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker run -i -t ubuntu:latest")]),s._v("\nroot@414bf796cbe4:/"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# echo 'hello world'")]),s._v("\nhello world\nroot@414bf796cbe4:/"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br")])]),e("p",[s._v("各个参数解析：")]),s._v(" "),e("ul",[e("li",[e("code",[s._v("-t")]),s._v(": 在新容器内指定一个伪终端或终端。")]),s._v(" "),e("li",[e("code",[s._v("-i")]),s._v(": 允许你对容器内的标准输入 (STDIN) 进行交互。")])]),s._v(" "),e("p",[s._v("我们可以通过运行 exit 命令或者使用 CTRL+D 来退出容器")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("root@414bf796cbe4:/"),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# exit")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token builtin class-name"}},[s._v("exit")]),s._v("\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("h3",{attrs:{id:"运行容器至后台模式"}},[e("a",{staticClass:"header-anchor",attrs:{href:"#运行容器至后台模式"}},[s._v("¶")]),s._v(" 运行容器至后台模式")]),s._v(" "),e("blockquote",[e("p",[s._v("我们先来看, 当我们跑完上面例子之后，我们看下后台是否有docker容器实例？")])]),s._v(" "),e("p",[s._v("显然没有任何容器实例")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v("所以我们需要"),e("code",[s._v("-d")]),s._v("参数，来让容器实例在后台运行，比如：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v('# docker run -d ubuntu:latest /bin/sh -c "while true; do echo hello world; sleep 1; done"')]),s._v("\n1a51d2f023c947f2be2d9a78eb863e854ca302c89bf354654c409e23e7dd25d7\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br")])]),e("p",[s._v('在输出中，我们没有看到期望的 "hello world"，而是一串长字符')]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[s._v("2b1b7a428627c51ab8810d541d759f072b4fc75487eed05812646b8534a2fe63\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br")])]),e("p",[s._v("这个长字符串叫做容器 ID，对每个容器来说都是唯一的，我们可以通过容器 ID 来查看对应的容器发生了什么。")]),s._v(" "),e("p",[s._v("首先，我们需要确认容器有在运行，可以通过 docker ps 来查看：")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND                  CREATED              STATUS              PORTS               NAMES\n1a51d2f023c9        ubuntu:latest       "),e("span",{pre:!0,attrs:{class:"token string"}},[s._v('"/bin/sh -c \'while t…"')]),s._v("   About a minute ago   Up About a minute                       gifted_brown\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br")])]),e("p",[s._v("输出详情介绍：")]),s._v(" "),e("ul",[e("li",[s._v("CONTAINER ID: 容器 ID。")]),s._v(" "),e("li",[s._v("IMAGE: 使用的镜像。")]),s._v(" "),e("li",[s._v("COMMAND: 启动容器时运行的命令。")]),s._v(" "),e("li",[s._v("CREATED: 容器的创建时间。")]),s._v(" "),e("li",[s._v("STATUS: 容器状态(状态有7种)。\n"),e("ul",[e("li",[s._v("created（已创建）")]),s._v(" "),e("li",[s._v("restarting（重启中）")]),s._v(" "),e("li",[s._v("running（运行中）")]),s._v(" "),e("li",[s._v("removing（迁移中）")]),s._v(" "),e("li",[s._v("paused（暂停）")]),s._v(" "),e("li",[s._v("exited（停止）")]),s._v(" "),e("li",[s._v("dead（死亡）")])])]),s._v(" "),e("li",[s._v("PORTS: 容器的端口信息和使用的连接类型（tcp\\udp）。")]),s._v(" "),e("li",[s._v("NAMES: 自动分配的容器名称。")])]),s._v(" "),e("p",[s._v("我们通过"),e("code",[s._v("docker logs")]),s._v(" 命令，查看指定容器内的标准输出:")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker logs 1a51d2f023c9")]),s._v("\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\nhello world\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br"),e("span",{staticClass:"line-number"},[s._v("6")]),e("br"),e("span",{staticClass:"line-number"},[s._v("7")]),e("br"),e("span",{staticClass:"line-number"},[s._v("8")]),e("br"),e("span",{staticClass:"line-number"},[s._v("9")]),e("br"),e("span",{staticClass:"line-number"},[s._v("10")]),e("br"),e("span",{staticClass:"line-number"},[s._v("11")]),e("br"),e("span",{staticClass:"line-number"},[s._v("12")]),e("br"),e("span",{staticClass:"line-number"},[s._v("13")]),e("br"),e("span",{staticClass:"line-number"},[s._v("14")]),e("br"),e("span",{staticClass:"line-number"},[s._v("15")]),e("br"),e("span",{staticClass:"line-number"},[s._v("16")]),e("br"),e("span",{staticClass:"line-number"},[s._v("17")]),e("br"),e("span",{staticClass:"line-number"},[s._v("18")]),e("br"),e("span",{staticClass:"line-number"},[s._v("19")]),e("br")])]),e("p",[s._v("最后我们看下，如何关闭后台实例")]),s._v(" "),e("div",{staticClass:"language-bash line-numbers-mode"},[e("pre",{pre:!0,attrs:{class:"language-bash"}},[e("code",[e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker stop 1a51d2f023c9")]),s._v("\n1a51d2f023c9\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# docker ps")]),s._v("\nCONTAINER ID        IMAGE               COMMAND             CREATED             STATUS              PORTS               NAMES\n"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("root@pdai ~"),e("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),e("span",{pre:!0,attrs:{class:"token comment"}},[s._v("#")]),s._v("\n")])]),s._v(" "),e("div",{staticClass:"line-numbers-wrapper"},[e("span",{staticClass:"line-number"},[s._v("1")]),e("br"),e("span",{staticClass:"line-number"},[s._v("2")]),e("br"),e("span",{staticClass:"line-number"},[s._v("3")]),e("br"),e("span",{staticClass:"line-number"},[s._v("4")]),e("br"),e("span",{staticClass:"line-number"},[s._v("5")]),e("br")])])])}),[],!1,null,null,null);a.default=n.exports}}]);