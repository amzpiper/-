(window.webpackJsonp=window.webpackJsonp||[]).push([[621],{1081:function(t,s,a){"use strict";a.r(s);var r=a(11),v=Object(r.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"springboot集成mysql---mybatis-多个数据源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#springboot集成mysql---mybatis-多个数据源"}},[t._v("¶")]),t._v(" SpringBoot集成MySQL - MyBatis 多个数据源")]),t._v(" "),a("blockquote",[a("p",[t._v("前文介绍的SpringBoot集成单个MySQL数据库的情形，那么什么场景会使用多个数据源以及什么场景会需要多个数据源的动态切换呢？本文主要介绍上述场景及SpringBoot+MyBatis实现多个数据源的方案和示例。@pdai")])]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#springboot%E9%9B%86%E6%88%90mysql---mybatis-%E5%A4%9A%E4%B8%AA%E6%95%B0%E6%8D%AE%E6%BA%90"}},[t._v("SpringBoot集成MySQL - MyBatis 多个数据源")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E7%9F%A5%E8%AF%86%E5%87%86%E5%A4%87"}},[t._v("知识准备")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"#%E4%BB%80%E4%B9%88%E5%9C%BA%E6%99%AF%E4%BC%9A%E5%87%BA%E7%8E%B0%E5%A4%9A%E4%B8%AA%E6%95%B0%E6%8D%AE%E6%BA%90"}},[t._v("什么场景会出现多个数据源？")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E5%B8%B8%E8%A7%81%E7%9A%84%E5%A4%9A%E6%95%B0%E6%8D%AE%E6%BA%90%E7%9A%84%E5%AE%9E%E7%8E%B0%E6%80%9D%E8%B7%AF"}},[t._v("常见的多数据源的实现思路？")])])])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E7%AE%80%E5%8D%95%E7%A4%BA%E4%BE%8B"}},[t._v("简单示例")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E8%BF%9B%E4%B8%80%E6%AD%A5%E7%90%86%E8%A7%A3"}},[t._v("进一步理解")])]),t._v(" "),a("li",[a("a",{attrs:{href:"#%E7%A4%BA%E4%BE%8B%E6%BA%90%E7%A0%81"}},[t._v("示例源码")])])])])]),t._v(" "),a("h2",{attrs:{id:"知识准备"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#知识准备"}},[t._v("¶")]),t._v(" 知识准备")]),t._v(" "),a("blockquote",[a("p",[t._v("需要了解多数据源出现的场景和对应的多数据源集成思路。@pdai")])]),t._v(" "),a("h3",{attrs:{id:"什么场景会出现多个数据源"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#什么场景会出现多个数据源"}},[t._v("¶")]),t._v(" 什么场景会出现多个数据源？")]),t._v(" "),a("blockquote",[a("p",[t._v("一般而言有如下几种出现多数据源的场景。")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("场景一：不同的业务涉及的表位于不同的数据库")])])]),t._v(" "),a("p",[t._v("随着业务的拓展，模块解耦，服务化的拆分等，不同的业务涉及的表会放在不同的数据库中。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("场景二：主库和从库分离（读写分离）")])])]),t._v(" "),a("p",[t._v("主从分离等相关知识请参考这篇文章： "),a("RouterLink",{attrs:{to:"/md/db/sql-mysql/sql-mysql-slave.html"}},[t._v("MySQL - 主从复制与读写分离")])],1),t._v(" "),a("ul",[a("li",[a("strong",[t._v("场景三：数据库的分片")])])]),t._v(" "),a("p",[t._v("数据库的分片相关知识和方案请参考："),a("RouterLink",{attrs:{to:"/md/spring/springboot/springboot-x-mysql-shardingjdbc.html"}},[t._v("SpringBoot集成MySQL - 分库分表ShardingJDBC")])],1),t._v(" "),a("ul",[a("li",[a("strong",[t._v("场景四：多租户隔离")])])]),t._v(" "),a("p",[t._v("所有数据库表结构一致，只是不同客户的数据放在不同数据库中，通过数据库名对不同客户的数据隔离。这种场景有一个典型的叫法：多租户。")]),t._v(" "),a("p",[t._v("PS：除了这种多租户除了用不同的数据库隔离不同客户数据外，还会通过额外的表字段隔离（比如tenant_id字段，不同的tenant_id表示不同的客户），对应的实现方式和案例可以参考"),a("RouterLink",{attrs:{to:"/md/spring/springboot/springboot-x-mysql-mybatis-plus-multi-tenant.html"}},[t._v("SpringBoot集成MySQL - MyBatis-Plus基于字段隔离的多租户")])],1),t._v(" "),a("h3",{attrs:{id:"常见的多数据源的实现思路"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#常见的多数据源的实现思路"}},[t._v("¶")]),t._v(" 常见的多数据源的实现思路？")]),t._v(" "),a("blockquote",[a("p",[t._v("应对上述出现的场景，多数据源方式如何实现呢？")])]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("针对场景一：不同的业务涉及的表位于不同的数据库")])])]),t._v(" "),a("p",[t._v("首先，出现这种场景且在一个模块中设计多数据源时，需要考虑当前架构的合理性，因为从设计的角度而言不同的业务拆分需要对应着不同的服务/模块。")]),t._v(" "),a("p",[t._v("其次，我们会"),a("strong",[t._v("考虑不同的package去隔离，不同的数据源放在不同的包下的代码中")]),t._v("。")]),t._v(" "),a("ul",[a("li",[a("strong",[t._v("针对场景二：主库和从库分离（读写分离）")])])]),t._v(" "),a("p",[t._v("这种场景下我们叫动态数据源，通常方式使用"),a("strong",[t._v("AOP方式拦截+ThreadLocal")]),t._v("切换。（本文的示例主要针对这种场景）")]),t._v(" "),a("h2",{attrs:{id:"简单示例"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#简单示例"}},[t._v("¶")]),t._v(" 简单示例")]),t._v(" "),a("p",[t._v("https://blog.csdn.net/tuesdayma/article/details/81081666")]),t._v(" "),a("h2",{attrs:{id:"进一步理解"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#进一步理解"}},[t._v("¶")]),t._v(" 进一步理解")]),t._v(" "),a("h2",{attrs:{id:"示例源码"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#示例源码"}},[t._v("¶")]),t._v(" 示例源码")]),t._v(" "),a("p",[t._v("https://github.dev/realpdai/tech-pdai-spring-demos")])])}),[],!1,null,null,null);s.default=v.exports}}]);